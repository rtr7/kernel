# Use the (faster) container-based infrastructure, see also
# http://docs.travis-ci.com/user/workers/container-based-infrastructure/
sudo: false

language: go
go:
  - "1.10"

env:
  global:
  # GITHUB_USER
  - secure: "grjMfi9BAE+/CSkv1Xtfmux9MKOWeIp7l0zeayk1QBnPswCzOBK7T6rvQ2A4XVfJrVA3cid45kiyjAdtEjgB0mbMOUXS0XtPENb6FopSOG+hDcd69RrSHBsUGbHzipl/iL5+BV4pjzy2Jhbb2UYhVib+PWMUBV8r10wZ1pCz9vtYJAn4nmdFJnfJ0zbdoUN4mtg7LK7j5GVBZxYOrwzD0VKkQU8GOHrAPYY0CJrbXvPM/+DJsO5h6oGB5HA0ixH5jmhQtw7GF/769o+NLt3ktKrPsSVennNtBZqZijNJ5q9acBQtt+VazVWP2a2rD0lXco1Gi4UNTxeRNst3X1YIqi6+ELTAcbCv7XrpjkHe5orp7QkIEtqnM274X4UxGBEsHYn1IYbRylvnsd4iDFxPcyoeVWJjFMRNk4CaPx0mpd3cJEHRNFjHEOnoKddAQ1JkY9iO3w+xZOosTLiun0lclamB+Krx6RnQOEZVgnZpOVgFX6JHyu5/JgG69els2m6Jd9TGPqmUvV+ilvjkzR7FQD1fu+Nk7ghid6/NeDaP6PtVj8lYtoSBaY/2dMTjLPuIejXW6kUzwP2LQy4zQedOjMnn1jevg9+NjFmkXPfNTN+CmHUbh+E1SwF3ZtLbbb4ijdWR6XMh3FCg6fykJFCh1gwu/2b250qUkHtsO1du/7k="
  # GITHUB_AUTH_TOKEN
  - secure: "cNl8vB/KirU1hhtd+5z3sEGYv7KaZfZrxFv09aDpcypB4OxbdX2ncVJlEHNlS5yUBy0mlHGgGpZuWLz+/a576kF2sOst1xbxRB+MBt1VWfVXappKtb307rOsGl2zHHcReOAuVDfua2v+Jj5pVrLr5exFZXrJNd9CRAezj54qCLQrYJJ9isolWdk49B1MG3bYlm1FhulI0DSXO/FfuZPTLHOJCduT/e2NH4Rnxr0uoBtehZYoKZ0ryc/dm0iZzvORxlWxVVcCBVqqcxLrPOGifibsqPeNQNS8rMFrlvgDmIPWmYmWiOBanYvsgmlhYLUu2v7nv3xmEnUYaUmnJ9QtrnjFykTmeIQgZ7FPuMyGBouOIwl8qqYcY0hqmllXO81QkxSOLfOTlFgI/55rqxCXRfYjekANlrgvb9D083f6wlrbLCgLIApnhX31lGEE+u89ZqukSzBMvYwx3bS4Z/ktqfkZmr5EgRIMDOs/2/HUbNZF9Uv/QOqCAPNSHUAx4aBGQjfZiKA1+NXru9PHe3rB9/qR+hnfcpzU5PBrsCOXgChMzj5uhPR30Z79i4Nf3GrNl23OtfWAGToR+P0I5HS7gworNTrf3zgoFyiupPvLsiZKRfe6IumiKKw4lPUHi5TcA+rF5yKfz8EjKb11RAjdydL9nxcg91SFp/WOAexNlCI="

script:
  - '[ "$TRAVIS_SECURE_ENV_VARS" != "true" ] || { go get -u github.com/gokrazy/autoupdate/cmd/gokr-pull-kernel && gokr-pull-kernel -updater_path=cmd/rtr7-build-kernel/build.go; }'
